@model RAMMS.Web.UI.Models.FormW1Model;
@using RAMMS.Business.ServiceProvider;
@inject RAMMS.Business.ServiceProvider.Interfaces.ISecurity security;
@{
    ViewBag.TabTitle = "Form W1 - Request for Instructed Work";
    Layout = null; //"~/Views/Shared/_PortalLayout.cshtml";

    bool ImageTypeBQ = false;
    bool ImageTypeDrawing = false;
    if (Model.ImageList != null && Model.ImageList.Count() > 0)
    {
        foreach (var item in Model.ImageList)
        {
            if (item.ImageTypeCode == "BQ")
            {
                ImageTypeBQ = true;
            }
            if (item.ImageTypeCode == "Drawing")
            {
                ImageTypeDrawing = true;
            }
        }
    }


}


<script src="~/js/FormW1.js" type="text/javascript"></script>

@using (Html.BeginForm())
{
    <div class="row" id="FormW1page">
        <div class="col-12 ">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-md-12">
                        <div class="w-100 position-relative float-left d-flex justify-content-center">
                            <ul class="nav nav-tabs tabbed round">
                                <li class="nav-item">
                                    <a href="#tab1" data-toggle="tab" aria-expanded="false" class="nav-link active">
                                        <span class="">
                                            Form W1
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#photoGallery" onclick="javascript: GetImageList('@Model.FormW1.PkRefNo','FormW1');" data-toggle="tab" aria-expanded="false" class="nav-link">
                                        <span class="">
                                            Attachments
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="row bg-white " id="FormW1datapage">
                            <div class="col-lg-12">
                                <div class="tab-content">
                                    <div class="tab-pane show active" id="tab1">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="mh-240 bg-white py-2">



                                                        <div class="container-fluid">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <div class="row">
                                                                        <div class="form-group col-md-2">
                                                                            @Html.Label("RMU", "RMU")
                                                                            @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["RMU_Division"], "RMU", "Select RMU", new { id = "ddlRMU", @class = "form-control {required, RMU Code} ", @onchange = "OnRMUChange(this);" }, Model.FormW1.RmuCode)

                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("Division Code", "Division Code")
                                                                            @Html.TextBoxFor(m => m.FormW1.DivnCode, new { @readonly = true, @class = "form-control" })
                                                                        </div>
                                                                        <div class="form-group col-md-2">
                                                                            @Html.Label("Section Code", "Section Code")
                                                                            @Html.DropDownListFor(m => m.FormW1.SecCode, (IEnumerable<SelectListItem>)ViewBag.SectionCodeList, "Select Section Code", new { @Id = "ddlSectionCode", @class = "form-control", @onchange = "OnSectionChange(this);" })

                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("Section Name", "Section Name")
                                                                            <input type="text" id="SecName" readonly class="form-control" />
                                                                        </div>


                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("FormH Reference No", "FormH Reference No")
                                                                            @Html.TextBoxFor(m => m.FormW1.FormhRefNo, new { @class = "form-control" })

                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("Approved IW Ref", "Approved IW Ref")
                                                                            @Html.TextBoxFor(m => m.FormW1.IwRefNo, new { @class = "form-control {required, Project Title}" })

                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("Project Title", "Project Title")
                                                                            @Html.TextBoxFor(m => m.FormW1.ProjectTitle, new { @class = "form-control svalidate {required, Project Title}" })
                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("TECM Date", "TECM Date")
                                                                            @Html.EditorFor(m => m.FormW1.TecmDt, "{0:dd/MM/yyyy}", new { htmlAttributes = new { @class = "form-control", @type = "date" } })
                                                                        </div>
                                                                        @*<div class="form-group col-lg-3">
                                                                                       @Html.Label("Status", "Status")
                                                                                       @Html.DropDownListFor(m => m.FormW1.Status, (IEnumerable
                                                                            <SelectListItem>)ViewData["TECM_Status"], "Select Satus", new { @class = "form-control svalidate {required, RMU}" })

                                                                                   </div>*@
                                                                        <div class="form-group col-lg-2">
                                                                            <div class="row mt-4">
                                                                                <div class="col-6 pt-1">
                                                                                    <label class="checkbox-inline"><input id="chkBQ" class="{required,BQ}" type="checkbox" disabled value=""> BQ</label>
                                                                                </div>
                                                                                <div class="col-6 pt-1">
                                                                                    <label class="checkbox-inline  "><input id="chkDrawing" class="{required,Drawing}" type="checkbox" disabled value=""> Drawing</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group col-lg-3">
                                                                            @Html.Label("Service Provider's Proposal Ref No", "Service Provider's Proposal Ref No")
                                                                            @Html.TextBoxFor(m => m.FormW1.ServPropRefNo, new { @class = "form-control svalidate {required,Service Provider's Proposal Ref No}" })
                                                                        </div>
                                                                        <div class="form-group col-lg-3">
                                                                            @Html.Label("Service Provider Name", "Service Provider Name")
                                                                            @*@Html.TextBoxFor(m => m.FormW1.ServPropName, new { @class = "form-control svalidate {required,Service Provider Name}" })*@
                                                                            @Html.DropDownListFor(m => m.FormW1.ServPropName, (IEnumerable<SelectListItem>)ViewData["ServiceProviderName"], "Select ServPropName", new { @class = "form-control svalidate {required, Service Provider Name}" })
                                                                        </div>
                                                                        @*<div class="form-group col-lg-4">
                                                                                <label for="Designation"> Address 1 </label>
                                                                                @Html.TextBoxFor(m => m.FormW1.ServAddress1, new { @class = "form-control" })
                                                                            </div>
                                                                            <div class="form-group col-lg-4">
                                                                                <label for="Designation"> Address 2 </label>
                                                                                @Html.TextBoxFor(m => m.FormW1.ServAddress2, new { @class = "form-control" })
                                                                            </div>
                                                                            <div class="form-group col-lg-4">
                                                                                <label for="Designation"> Address 3 </label>
                                                                                @Html.TextBoxFor(m => m.FormW1.ServAddress3, new { @class = "form-control" })
                                                                            </div>
                                                                            <div class="form-group col-lg-3">
                                                                                <label for="Designation">Phone NO </label>
                                                                                @Html.TextBoxFor(m => m.FormW1.ServPhone, new { @class = "form-control" })
                                                                            </div>
                                                                            <div class="form-group col-lg-3">
                                                                                <label for="Designation"> Fax </label>
                                                                                @Html.TextBoxFor(m => m.FormW1.ServFax, new { @class = "form-control" })
                                                                            </div>*@
                                                                        <div class="form-group col-lg-3">
                                                                            <label>
                                                                                Intial Proposed Date
                                                                            </label>
                                                                            @Html.EditorFor(m => m.FormW1.InitialProposedDate, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                                        </div>
                                                                        <div class="form-group col-lg-3">
                                                                            <label>
                                                                                Form W1 Date
                                                                            </label>
                                                                            @Html.EditorFor(m => m.FormW1.Dt, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="bg-white rounded landing-division w-100 float-left mb-3 border">
                                                                        <div class="col-lg-12 py-2 px-4">
                                                                            <span class="font-14 font-weight-bold">
                                                                                Part A:  Name of Site/Location
                                                                            </span>
                                                                        </div>
                                                                        <div class="border-top px-3 pt-3 pb-1 float-left w-100">
                                                                            <div class="w-100 dt-tbl-section">
                                                                                <div class="form-group col-lg-3">
                                                                                    @Html.Label("Road Code", "Road Code")
                                                                                    @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["RD_Code"], "RoadCode", "Select Road Code", new { id = "ddlRoadCode", @class = "form-control svalidate {required,Road Code}", @onchange = "OnRoadChange(this);" })

                                                                                </div>
                                                                                <div class="form-group col-lg-4">
                                                                                    @Html.Label("Road Name", "Road Name")
                                                                                    @Html.TextBoxFor(m => m.FormW1.RoadName, new { @readonly = true, @class = "form-control" })

                                                                                </div>
                                                                                <div class="form-group col-lg-2 p-0">

                                                                                    <label for="RoadCode" class="mb-1">
                                                                                        Chainage 'KM' Location
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-prepend">
                                                                                            <span class="input-group-text" style="height: 35px;">CH</span>
                                                                                        </div>
                                                                                        @Html.TextBoxFor(m => m.FormW1.Ch, new { @maxlength = "6", @class = "form-control allow_numeric svalidate {required,Chainage KM from}", style = "height:35px" })

                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group col-lg-1 pt-4 px-0 text-center" style="max-width:4.33%">
                                                                                    +
                                                                                </div>
                                                                                <div class="form-group col-lg-2 p-0">
                                                                                    <label for="RoadCode">
                                                                                        Chainage 'M' Location
                                                                                    </label>
                                                                                    @Html.TextBoxFor(m => m.FormW1.ChDeci, new { @maxlength = "3", @class = "form-control allow_numeric svalidate {required,Chainage KM from}" })

                                                                                </div>

                                                                            </div>


                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-12">

                                                                    <div class="bg-white rounded landing-division w-100 float-left mb-3 border">
                                                                        <div class="col-lg-12 py-2 px-4">
                                                                            <span class="font-14 font-weight-bold">
                                                                                PART B : Details of Works
                                                                            </span>
                                                                        </div>
                                                                        <div class="border-top px-3 pt-3 pb-1 float-left w-100">
                                                                            <div class="row">
                                                                                <div class="form-group col-lg-12">
                                                                                    @Html.TextAreaFor(m => m.FormW1.DetailsOfWork, new { placeholder = "Details of Works", @class = "form-control  svalidate {required,Details of Work} border-left border-top-0 border-left-0 border-right-0", @style = "height:105px;" })
                                                                                </div>
                                                                                <div class="form-group col-lg-3">
                                                                                    @Html.Label("Proposed Design Duration (Months)", "Proposed Design Duration (Months)")
                                                                                    @Html.TextBoxFor(m => m.FormW1.PropDesignDuration, new { @maxlength = "5", @class = "form-control allow_numeric", @onchange = "DurationChange(this,'Proposed Design Duration invalid')" })
                                                                                </div>
                                                                                <div class="form-group col-lg-3">
                                                                                    @Html.Label("Proposed Completion of IW Period (Months)", "Proposed Completion of IW Period (Months)")
                                                                                    @Html.TextBoxFor(m => m.FormW1.PropCompletionPeriod, new { @maxlength = "5", @class = "form-control allow_numeric", @onchange = "DurationChange(this,'Proposed Completion of IW Period invalid')" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12">
                                                                    <div class="bg-white rounded landing-division w-100 float-left mb-3 border">
                                                                        <div class="col-lg-12 py-2 px-4">
                                                                            <span class="font-14 font-weight-bold">
                                                                                PART C: COST ESTIMATE (refer to attached Bill of Quantities, Drawings and all its associated supporting documents )
                                                                            </span>
                                                                        </div>
                                                                        <div class="border-top px-3 pt-3 pb-1 float-left w-100">
                                                                            <div class="container-fluid">
                                                                                <div class="row">
                                                                                    <div class="col-lg-12">
                                                                                        <div class="row py-2 border-bottom">
                                                                                            <div class="col-8">
                                                                                                <label class="pt-1 mb-0" for=" PhysicalWorks">
                                                                                                    <b class="lh30 mb-0">  Physical Works</b>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(m => m.FormW1.PhyWorksAmt, new { @maxlength = "12", @class = "form-control allow_numeric text-right", @onchange = "CalculateCost()" })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row py-2 border-bottom">
                                                                                            <div class="col-8">
                                                                                                <label class="pt-1 mb-0" for="GeneralandPreliminaries">
                                                                                                    <b class="lh30 mb-0">  General and Preliminaries</b>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(m => m.FormW1.GenPrelimsAmt, new { @maxlength = "12", @class = "form-control allow_numeric text-right", @onchange = "CalculateCost()" })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row py-1 pt-2 border-bottom">
                                                                                            <div class="col-8">
                                                                                                <label for="Consultancy Fees" class="pt-1 mb-0">
                                                                                                    <b class="lh30 mb-0">
                                                                                                        <span class="float-left">Consultancy Fees + Government Tax </span> <span class="float-left pr-3" style="width:135px;">@Html.TextBoxFor(model => model.FormW1.ConsulTaxPercent, new { @maxlength = "5", @class = "form-control numeric allow_numeric form-control border-left border-top-0 border-left-0 border-right-0 float-left text-right", @onchange = "PercentChange(this,'ConsulTaxPercent invalid')", @style = "width:100px;" }) <b class="float-right">%</b></span><span class="float-left">(If any)</span>
                                                                                                    </b>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(model => model.FormW1.ConsulFeeAmt, new { @maxlength = "12", @class = "form-control numeric allow_numeric text-right", @onchange = "CalculateCost()" })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>

                                                                                        <div class="row py-1  pt-2 border-bottom">
                                                                                            <div class="col-8">
                                                                                                <label for="Surveyworks" class="pt-1 mb-0">
                                                                                                    <b class="lh30 mb-0"><span class="float-left">Survey Works + Government Tax </span> <span class="float-left pr-3" style="width:135px;"> @Html.TextBoxFor(model => model.FormW1.SurvyWorksPercent, new { @maxlength = "5", @class = "form-control numeric allow_numeric form-control border-left border-top-0 border-left-0 border-right-0 float-left text-right", @onchange = "PercentChange(this,'Survey Works + Government Tax invalid')", @style = "width:100px;" }) <b class="float-right">%</b> </span><span class="float-left"> (If any)</span></b>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(model => model.FormW1.SurvyWorksAmt, new { @maxlength = "12", @class = "form-control numeric allow_numeric text-right", @onchange = "CalculateCost()" })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row py-1 pt-2 border-bottom">
                                                                                            <div class="col-8">
                                                                                                <label for="SiteInvestigation" class="pt-1 mb-0">
                                                                                                    <b class="lh30 mb-0"><span class="float-left">Site Investigation + Government Tax</span> <span class="float-left pr-3" style="width:135px;">@Html.TextBoxFor(model => model.FormW1.SiteInvestPercent, new { @maxlength = "5", @class = "form-control numeric allow_numeric form-control border-left border-top-0 border-left-0 border-right-0 float-left text-right", @onchange = "PercentChange(this,'Site Investigation + Government Tax')", @style = "width:100px;" }) <b class="float-right">%</b> </span><span class="float-left"> (If any)</span></b>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(model => model.FormW1.SiteInvestAmt, new { @maxlength = "12", @class = "form-control numeric allow_numeric text-right", @onchange = "CalculateCost()" })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row py-2 border-bottom">
                                                                                            <div class="col-12">

                                                                                            </div>
                                                                                            <div class="col-8">
                                                                                                @Html.TextAreaFor(m => m.FormW1.OtherCostLabel, new { placeholder = "Any other cost", @class = "form-control", @style = "height:37px" })
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(model => model.FormW1.OtherCostAmt, new { @maxlength = "12", @class = "form-control numeric allow_numeric text-right", @onchange = "CalculateCost()" })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row py-2">
                                                                                            <div class="col-8">
                                                                                                <label for="Estimatedtotalcost" class="pt-1 mb-0">
                                                                                                    <b class="lh30 mb-0">
                                                                                                        Estimated Total Cost
                                                                                                    </b>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-4">
                                                                                                <div class="input-group">
                                                                                                    <div class="input-group-prepend">
                                                                                                        <span class="input-group-text">RM</span>
                                                                                                    </div>
                                                                                                    @Html.TextBoxFor(model => model.FormW1.EstimTotalCostAmt, new { @maxlength = "12", @class = "form-control numeric text-right", @readonly = true })
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <div class="col-12">

                                                                    <div class="row">

                                                                        <div class="col-lg-4">
                                                                            <label>Recommendation</label>
                                                                            <br />
                                                                            <label class="radio-inline"> @Html.RadioButtonFor(x => x.FormW1.RecomdYn, true)&nbsp;Yes&nbsp;</label>
                                                                            <label class="radio-inline"> @Html.RadioButtonFor(x => x.FormW1.RecomdYn, false)&nbsp;No&nbsp;</label>
                                                                        </div>
                                                                        <div class="col-lg-4">
                                                                            @Html.Label("Recommendation by DE", "Recommendation by DE")
                                                                            <br />
                                                                            <label class="radio-inline"> @Html.RadioButtonFor(x => x.FormW1.RecomdBydeYn, true)&nbsp;Yes&nbsp;</label>
                                                                            <label class="radio-inline"> @Html.RadioButtonFor(x => x.FormW1.RecomdBydeYn, false)&nbsp;No&nbsp;</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 mt-3">
                                                                    <div class="row py-1">
                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation">
                                                                                Requested by
                                                                            </label>
                                                                            @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["User"], "UseridReq", "Select Users", new { Id = "ddlUseridReq", @class = "form-control svalidate {required,  Requested by}", @onchange = "OnUseridReqUserChange(this); " })
                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("Name", "Name")
                                                                            @Html.TextBoxFor(model => model.FormW1.UsernameReq, new { @readonly = true, @class = "form-control" })

                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation"> Designation</label>
                                                                            @Html.TextBoxFor(model => model.FormW1.DesignationReq, new { @readonly = true, @class = "form-control" })

                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation"> Office</label>
                                                                            @Html.TextBoxFor(model => model.FormW1.OfficeReq, new { @readonly = true, @class = "form-control" })
                                                                        </div>
                                                                        <div class="form-group col-lg-2 pr-0">
                                                                            @Html.Label("Date (DD-MM-YYYY)", "Date (DD-MM-YYYY)")
                                                                            @Html.EditorFor(m => m.FormW1.DtReq, new { type = "date", htmlAttributes = new { @class = "form-control" } })

                                                                        </div>
                                                                        <div class="form-group col-lg-2 text-center">
                                                                            @Html.Label("Signature", "Signature")
                                                                            <div class="clear-b mt-2">
                                                                                @Html.CheckBoxFor(model => model.FormW1.SignReq, new { @disabled = "disabled" })
                                                                            </div>

                                                                        </div>


                                                                    </div>

                                                                    <div class="row pt-3 pb-1 approvesection">
                                                                        <div class="col-12">
                                                                            <div class="row">
                                                                                <div class="col-lg-4">
                                                                                    @Html.Label("Recommonded Instructed Work", "Recommonded Instructed Work")
                                                                                    <br />
                                                                                    <label class="radio-inline">
                                                                                        @Html.RadioButtonFor(x => x.FormW1.RecomdType, 2, new { @onclick = "RecommondedValue(this)" })&nbsp;	Critical&nbsp;
                                                                                    </label>
                                                                                    <label class="radio-inline">
                                                                                        @Html.RadioButtonFor(x => x.FormW1.RecomdType, 1, new { @onclick = "RecommondedValue(this)" })&nbsp;	Urgent&nbsp;
                                                                                    </label>
                                                                                    <label class="radio-inline">
                                                                                        @Html.RadioButtonFor(x => x.FormW1.RecomdType, 0, new { @onclick = "RecommondedValue(this)" })&nbsp;	None&nbsp;
                                                                                    </label>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group col-lg-2">
                                                                            @Html.Label("Reported by", "Reported by")
                                                                            @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["User"], "UseridRep", "Select Users", new { Id = "ddlUseridRep", @class = "form-control   {required,  Reported by}", @onchange = "OnUseridRepUserChange(this); " })

                                                                        </div>
                                                                        <div class="form-group col-lg-3">
                                                                            @Html.Label("Name", "Name")
                                                                            @Html.TextBoxFor(model => model.FormW1.UsernameRep, new { @readonly = true, @class = "form-control" })

                                                                        </div>
                                                                        <div class="form-group col-lg-3">
                                                                            <label for="Designation"> Designation</label>
                                                                            @Html.TextBoxFor(model => model.FormW1.DesignationRep, new { @readonly = true, @class = "form-control" })
                                                                        </div>
                                                                        <div class="form-group col-lg-2 pr-0">
                                                                            @Html.Label("Date (DD-MM-YYYY)", "Date (DD-MM-YYYY)")
                                                                            @Html.EditorFor(m => m.FormW1.DtRep, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                                        </div>
                                                                        <div class="form-group col-lg-2 text-center">
                                                                            @Html.Label("Signature", "Signature")
                                                                            <div class="clear-b mt-2">
                                                                                @Html.CheckBoxFor(model => model.FormW1.SignRep, new { @disabled = "disabled" })
                                                                            </div>

                                                                        </div>


                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation">
                                                                                Verified By
                                                                            </label>
                                                                            @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["User"], "UseridVer", "Select Users", new { @readonly = true, Id = "ddlUseridVer", @class = "form-control  {required, Verified By}", @onchange = "OnVerifyUserChange(this);" })
                                                                        </div>
                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation"> Name </label>
                                                                            @Html.TextBoxFor(model => model.FormW1.UsernameVer, new { @readonly = true, @class = "form-control" })
                                                                        </div>

                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation"> Designation</label>
                                                                            @Html.TextBoxFor(model => model.FormW1.DesignationVer, new { @readonly = true, @class = "form-control" })
                                                                        </div>

                                                                        <div class="form-group col-lg-2">
                                                                            <label for="Designation"> Office</label>
                                                                            @Html.TextBoxFor(model => model.FormW1.OfficeVer, new { @readonly = true, @class = "form-control" })
                                                                        </div>
                                                                        <div class="form-group col-lg-2 pr-0">
                                                                            <label>Date (DD-MM-YYYY)</label>
                                                                            @Html.EditorFor(m => m.FormW1.DtVer, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                                        </div>
                                                                        <div class="form-group col-lg-2 text-center">
                                                                            <label>Signature</label>
                                                                            <div class="clear-b mt-2">
                                                                                @Html.CheckBoxFor(model => model.FormW1.SignVer, new { @disabled = "disabled" })
                                                                            </div>

                                                                        </div>

                                                                    </div>







                                                                </div>
                                                            </div>
                                                        </div>

                                                        @{
                                                            if (Model.FormW1.Status != "" && Model.FormW1.Status != "Draft")
                                                                Html.RenderPartial("~/Views/Shared/_ProcessHistory.cshtml", new RAMMS.DTO.RequestBO.ProcessDTO
                                                                {
                                                                    Form = "FormW1",
                                                                    RefId = Model.FormW1.PkRefNo,
                                                                    Stage = Model.FormW1.Status
                                                                });
                                                        }

                                                        <!--gallery start-->
                                                        <!--galler end-->


                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                    <div id="photoGallery" class="tab-pane">
                                        <div id="ViewPhoto">

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div> <div class="col-md-12 mb-2 float-right text-right custom-footer">
                            <button type="button" id="btnBack" class="btn btn-sm btn-outline-theme" onclick="GoBack()">Close</button>

                            @if (string.IsNullOrEmpty(Model.FormW1.Status) || Model.FormW1.Status == "Draft" || Model.FormW1.Status == RAMMS.Common.StatusList.Supervisor)
                            {
                                <button type="button" id="btnSave" class="btn btn-sm btn-themebtn" onclick="Save('','')">Save</button>
                                <button type="button" id="btnSubmit" class="btn btn-sm btn-themebtn" onclick="Save('@RAMMS.Common.GroupNames.Supervisor','Submitted');">Submit</button>
                            }
                            else if (security.IsJKRSSuperiorOfficer && Model.FormW1.Status == RAMMS.Common.StatusList.FormW1Submitted)
                            {
                                <button type="button" id="btnSave" class="btn btn-sm btn-themebtn" onclick="Save('','')">Save</button>
                                <button type="button" id="btnSubmit" class="btn btn-sm btn-themebtn" onclick="Save('@RAMMS.Common.GroupNames.Supervisor','Verified'); ">Approved / Verified</button>
                            }
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
    @Html.HiddenFor(m => m.FormW1.RmuCode);
    @Html.HiddenFor(m => m.FormW1.PkRefNo);
    @Html.HiddenFor(m => m.FormW1.RoadCode);
    @Html.HiddenFor(m => m.FormW1.UseridReq);
    @Html.HiddenFor(m => m.FormW1.UseridVer);
    @Html.HiddenFor(m => m.FormW1.UseridRep);
    @Html.HiddenFor(m => m.FormW1.Status);
    @Html.HiddenFor(m => m.FormW1.SubmitSts);
    @Html.HiddenFor(m => m.FormW1.IsBq);
    @Html.HiddenFor(m => m.FormW1.IsDrawing);
    <input type="hidden" id="hdnForm" value="FormW1" />
    <input type="hidden" id="hdnPkRefNo" value="@Model.FormW1.PkRefNo" />
    <input type="hidden" id="hdnView" value="@Model.View" />
    <input type="hidden" id="hdnRecommondedValue" value="@Model.FormW1.RecomdType" />


}



<script>




    var ImageTypeBQ = "@ImageTypeBQ";
    var ImageTypeDrawing = "@ImageTypeDrawing";


    $(document).ready(function () {

           process.Init("FormW1", "@Model.FormW1.Status", @Model.FormW1.PkRefNo);

        if (ImageTypeBQ == "True") {
            $('#chkBQ').prop("checked", true);
        }
        else {
            $('#chkBQ').prop("checked", false);
        }
        if (ImageTypeDrawing == "True") {
            $('#chkDrawing').prop("checked", true);
        }
        else {
            $('#chkDrawing').prop("checked", false);
        }


        $('#ddlRMU').val("@Model.FormW1.RmuCode");
        $('#ddlRMU').trigger('chosen:updated');



        $('#ddlRoadCode').val("@Model.FormW1.RoadCode");
        $('#ddlRoadCode').trigger('chosen:updated');

        $('#ddlUseridReq').val("@Model.FormW1.UseridReq");
        $('#ddlUseridReq').trigger('chosen:updated');
        $("#ddlUseridReq").trigger("change");

        $('#ddlUseridVer').val("@Model.FormW1.UseridVer");
        $('#ddlUseridVer').trigger('chosen:updated');
        $("#ddlUseridVer").trigger("change");

        $('#ddlUseridRep').val("@Model.FormW1.UseridRep");
        $('#ddlUseridRep').trigger('chosen:updated');
        $("#ddlUseridRep").trigger("change");

        GetNames($("#ddlSectionCode").val() == "" ? "0" : $("#ddlSectionCode").val(), "Section Code");

    });
</script>
